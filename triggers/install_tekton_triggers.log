namespace/tekton-pipelines configured
podsecuritypolicy.policy/tekton-pipelines configured
clusterrole.rbac.authorization.k8s.io/tekton-pipelines-admin created
serviceaccount/tekton-pipelines-controller configured
clusterrolebinding.rbac.authorization.k8s.io/tekton-pipelines-controller-admin created
customresourcedefinition.apiextensions.k8s.io/clustertasks.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/conditions.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/images.caching.internal.knative.dev configured
customresourcedefinition.apiextensions.k8s.io/pipelines.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/pipelineruns.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/pipelineresources.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/tasks.tekton.dev configured
customresourcedefinition.apiextensions.k8s.io/taskruns.tekton.dev configured
secret/webhook-certs configured
validatingwebhookconfiguration.admissionregistration.k8s.io/validation.webhook.pipeline.tekton.dev configured
mutatingwebhookconfiguration.admissionregistration.k8s.io/webhook.pipeline.tekton.dev configured
validatingwebhookconfiguration.admissionregistration.k8s.io/config.webhook.pipeline.tekton.dev configured
clusterrole.rbac.authorization.k8s.io/tekton-aggregate-edit configured
clusterrole.rbac.authorization.k8s.io/tekton-aggregate-view configured
configmap/config-artifact-bucket configured
configmap/config-artifact-pvc configured
configmap/config-defaults configured
configmap/feature-flags configured
configmap/config-logging configured
configmap/config-observability configured
service/tekton-pipelines-controller configured
service/tekton-pipelines-webhook configured
Error from server (Invalid): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/component\":\"controller\",\"app.kubernetes.io/name\":\"tekton-pipelines\",\"pipeline.tekton.dev/release\":\"v0.11.2\",\"version\":\"v0.11.2\"},\"name\":\"tekton-pipelines-controller\",\"namespace\":\"tekton-pipelines\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"tekton-pipelines-controller\"}},\"template\":{\"metadata\":{\"annotations\":{\"cluster-autoscaler.kubernetes.io/safe-to-evict\":\"false\"},\"labels\":{\"app\":\"tekton-pipelines-controller\",\"app.kubernetes.io/component\":\"controller\",\"app.kubernetes.io/name\":\"tekton-pipelines\",\"pipeline.tekton.dev/release\":\"v0.11.2\",\"version\":\"v0.11.2\"}},\"spec\":{\"containers\":[{\"args\":[\"-kubeconfig-writer-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/kubeconfigwriter:v0.11.2@sha256:d01fa1db8abcad318d05e62e35153a91c6c995949e52133520d9e4735e9a486c\",\"-creds-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/creds-init:v0.11.2@sha256:ced427e48b143bc821aedd4a0936fa2caef3f208d70efe68ccba786c12b2c943\",\"-git-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/git-init:v0.11.2@sha256:bee98bfe6807e8f4e0a31b4e786fd1f7f459e653ed1a22b1a25999f33fa9134a\",\"-nop-image\",\"tianon/true\",\"-shell-image\",\"busybox\",\"-gsutil-image\",\"google/cloud-sdk\",\"-entrypoint-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/entrypoint:v0.11.2@sha256:bc5beb48ca4f87013ccb466bf739d6c99ef9f1ddf51899c73ead99f242b4e57d\",\"-imagedigest-exporter-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/imagedigestexporter:v0.11.2@sha256:7a03343deaeaa6b2d779df37417f9bf76cb5f67b36dd298e5bb69a0f625a2b38\",\"-pr-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/pullrequest-init:v0.11.2@sha256:3a395509e0d75786eafe96f68d22afc7c4d23a2a76ffc77218b25e8c6c81f6ba\",\"-build-gcs-fetcher-image\",\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/vendor/github.com/googlecloudplatform/cloud-builders/gcs-fetcher/cmd/gcs-fetcher:v0.11.2@sha256:a020c8510b15870a5b059708197ac7c4ef0d1cbd668eb0872105ad658d509f67\"],\"env\":[{\"name\":\"SYSTEM_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CONFIG_LOGGING_NAME\",\"value\":\"config-logging\"},{\"name\":\"CONFIG_OBSERVABILITY_NAME\",\"value\":\"config-observability\"},{\"name\":\"CONFIG_ARTIFACT_BUCKET_NAME\",\"value\":\"config-artifact-bucket\"},{\"name\":\"CONFIG_ARTIFACT_PVC_NAME\",\"value\":\"config-artifact-pvc\"},{\"name\":\"METRICS_DOMAIN\",\"value\":\"tekton.dev/pipeline\"}],\"image\":\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/controller:v0.11.2@sha256:0791513ec1176da38c403eb81220406e987f78f3e58608bd57be1adc45bc9aac\",\"name\":\"tekton-pipelines-controller\",\"volumeMounts\":[{\"mountPath\":\"/etc/config-logging\",\"name\":\"config-logging\"}]}],\"serviceAccountName\":\"tekton-pipelines-controller\",\"volumes\":[{\"configMap\":{\"name\":\"config-logging\"},\"name\":\"config-logging\"}]}}}}\n"},"labels":{"app.kubernetes.io/instance":null,"app.kubernetes.io/name":"tekton-pipelines","app.kubernetes.io/part-of":null,"app.kubernetes.io/version":null,"pipeline.tekton.dev/release":"v0.11.2","version":"v0.11.2"}},"spec":{"selector":{"matchLabels":{"app":"tekton-pipelines-controller","app.kubernetes.io/component":null,"app.kubernetes.io/instance":null,"app.kubernetes.io/name":null,"app.kubernetes.io/part-of":null}},"template":{"metadata":{"labels":{"app.kubernetes.io/instance":null,"app.kubernetes.io/name":"tekton-pipelines","app.kubernetes.io/part-of":null,"app.kubernetes.io/version":null,"pipeline.tekton.dev/release":"v0.11.2","version":"v0.11.2"}},"spec":{"$setElementOrder/containers":[{"name":"tekton-pipelines-controller"}],"$setElementOrder/volumes":[{"name":"config-logging"}],"containers":[{"$setElementOrder/env":[{"name":"SYSTEM_NAMESPACE"},{"name":"CONFIG_LOGGING_NAME"},{"name":"CONFIG_OBSERVABILITY_NAME"},{"name":"CONFIG_ARTIFACT_BUCKET_NAME"},{"name":"CONFIG_ARTIFACT_PVC_NAME"},{"name":"METRICS_DOMAIN"}],"$setElementOrder/volumeMounts":[{"mountPath":"/etc/config-logging"}],"args":["-kubeconfig-writer-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/kubeconfigwriter:v0.11.2@sha256:d01fa1db8abcad318d05e62e35153a91c6c995949e52133520d9e4735e9a486c","-creds-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/creds-init:v0.11.2@sha256:ced427e48b143bc821aedd4a0936fa2caef3f208d70efe68ccba786c12b2c943","-git-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/git-init:v0.11.2@sha256:bee98bfe6807e8f4e0a31b4e786fd1f7f459e653ed1a22b1a25999f33fa9134a","-nop-image","tianon/true","-shell-image","busybox","-gsutil-image","google/cloud-sdk","-entrypoint-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/entrypoint:v0.11.2@sha256:bc5beb48ca4f87013ccb466bf739d6c99ef9f1ddf51899c73ead99f242b4e57d","-imagedigest-exporter-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/imagedigestexporter:v0.11.2@sha256:7a03343deaeaa6b2d779df37417f9bf76cb5f67b36dd298e5bb69a0f625a2b38","-pr-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/pullrequest-init:v0.11.2@sha256:3a395509e0d75786eafe96f68d22afc7c4d23a2a76ffc77218b25e8c6c81f6ba","-build-gcs-fetcher-image","gcr.io/tekton-releases/github.com/tektoncd/pipeline/vendor/github.com/googlecloudplatform/cloud-builders/gcs-fetcher/cmd/gcs-fetcher:v0.11.2@sha256:a020c8510b15870a5b059708197ac7c4ef0d1cbd668eb0872105ad658d509f67"],"env":[{"$patch":"delete","name":"CONFIG_DEFAULTS_NAME"},{"$patch":"delete","name":"CONFIG_FEATURE_FLAGS_NAME"},{"$patch":"delete","name":"CONFIG_LEADERELECTION_NAME"},{"$patch":"delete","name":"SSL_CERT_DIR"},{"$patch":"delete","name":"SSL_CERT_FILE"}],"image":"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/controller:v0.11.2@sha256:0791513ec1176da38c403eb81220406e987f78f3e58608bd57be1adc45bc9aac","livenessProbe":null,"name":"tekton-pipelines-controller","ports":null,"readinessProbe":null,"securityContext":null,"volumeMounts":[{"$patch":"delete","mountPath":"/etc/config-registry-cert"}]}],"volumes":[{"$patch":"delete","name":"config-registry-cert"}]}}}}
to:
Resource: "apps/v1, Resource=deployments", GroupVersionKind: "apps/v1, Kind=Deployment"
Name: "tekton-pipelines-controller", Namespace: "tekton-pipelines"
for: "tekton-triggers-release.yaml": Deployment.apps "tekton-pipelines-controller" is invalid: spec.selector: Invalid value: v1.LabelSelector{MatchLabels:map[string]string{"app":"tekton-pipelines-controller"}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable
Error from server (Invalid): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app.kubernetes.io/component\":\"webhook-controller\",\"app.kubernetes.io/name\":\"tekton-pipelines\",\"pipeline.tekton.dev/release\":\"v0.11.2\",\"version\":\"v0.11.2\"},\"name\":\"tekton-pipelines-webhook\",\"namespace\":\"tekton-pipelines\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"tekton-pipelines-webhook\",\"role\":\"webhook\"}},\"template\":{\"metadata\":{\"annotations\":{\"cluster-autoscaler.kubernetes.io/safe-to-evict\":\"false\"},\"labels\":{\"app\":\"tekton-pipelines-webhook\",\"app.kubernetes.io/component\":\"webhook-controller\",\"app.kubernetes.io/name\":\"tekton-pipelines\",\"pipeline.tekton.dev/release\":\"v0.11.2\",\"role\":\"webhook\",\"version\":\"v0.11.2\"}},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"SYSTEM_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CONFIG_LOGGING_NAME\",\"value\":\"config-logging\"},{\"name\":\"CONFIG_OBSERVABILITY_NAME\",\"value\":\"config-observability\"},{\"name\":\"WEBHOOK_SERVICE_NAME\",\"value\":\"tekton-pipelines-webhook\"},{\"name\":\"METRICS_DOMAIN\",\"value\":\"tekton.dev/pipeline\"}],\"image\":\"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/webhook:v0.11.2@sha256:9826548f3bd8cc0c4187ca0ab5ab8114009874625828a23301c1f60be4f294fa\",\"name\":\"webhook\",\"ports\":[{\"containerPort\":9090,\"name\":\"metrics\"},{\"containerPort\":8008,\"name\":\"profiling\"},{\"containerPort\":8443,\"name\":\"https-webhook\"}],\"securityContext\":{\"allowPrivilegeEscalation\":false}}],\"serviceAccountName\":\"tekton-pipelines-controller\"}}}}\n"},"labels":{"app.kubernetes.io/component":"webhook-controller","app.kubernetes.io/instance":null,"app.kubernetes.io/name":"tekton-pipelines","app.kubernetes.io/part-of":null,"app.kubernetes.io/version":null,"pipeline.tekton.dev/release":"v0.11.2","version":"v0.11.2"}},"spec":{"selector":{"matchLabels":{"app":"tekton-pipelines-webhook","app.kubernetes.io/component":null,"app.kubernetes.io/instance":null,"app.kubernetes.io/name":null,"app.kubernetes.io/part-of":null,"role":"webhook"}},"template":{"metadata":{"labels":{"app.kubernetes.io/component":"webhook-controller","app.kubernetes.io/instance":null,"app.kubernetes.io/name":"tekton-pipelines","app.kubernetes.io/part-of":null,"app.kubernetes.io/version":null,"pipeline.tekton.dev/release":"v0.11.2","role":"webhook","version":"v0.11.2"}},"spec":{"$setElementOrder/containers":[{"name":"webhook"}],"affinity":null,"containers":[{"$setElementOrder/env":[{"name":"SYSTEM_NAMESPACE"},{"name":"CONFIG_LOGGING_NAME"},{"name":"CONFIG_OBSERVABILITY_NAME"},{"name":"WEBHOOK_SERVICE_NAME"},{"name":"METRICS_DOMAIN"}],"$setElementOrder/ports":[{"containerPort":9090},{"containerPort":8008},{"containerPort":8443}],"env":[{"$patch":"delete","name":"CONFIG_LEADERELECTION_NAME"},{"$patch":"delete","name":"WEBHOOK_SECRET_NAME"}],"image":"gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/webhook:v0.11.2@sha256:9826548f3bd8cc0c4187ca0ab5ab8114009874625828a23301c1f60be4f294fa","livenessProbe":null,"name":"webhook","ports":[{"$patch":"delete","containerPort":8080}],"readinessProbe":null,"resources":null,"securityContext":{"capabilities":null,"runAsGroup":null,"runAsUser":null}}],"serviceAccountName":"tekton-pipelines-controller"}}}}
to:
Resource: "apps/v1, Resource=deployments", GroupVersionKind: "apps/v1, Kind=Deployment"
Name: "tekton-pipelines-webhook", Namespace: "tekton-pipelines"
for: "tekton-triggers-release.yaml": Deployment.apps "tekton-pipelines-webhook" is invalid: spec.selector: Invalid value: v1.LabelSelector{MatchLabels:map[string]string{"app":"tekton-pipelines-webhook", "role":"webhook"}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable
